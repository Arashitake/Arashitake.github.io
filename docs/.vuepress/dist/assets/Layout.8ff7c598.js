import{_ as V,f as A,u as D,j as G,X as U,r as M,o as r,c as i,h as e,H as q,z as h,b as v,L as j,M as K,g as I,w as g,e as z,t as m,A as N,a as y,B as O,W,l as X,m as C,n as R,Y as Z,s as E,v as Y,x as J,y as d,F as Q,Z as ee,K as ae,G as te,D as oe,E as se,T as ne}from"./app.f9568f53.js";import{f as re}from"./resolveTime.fab24dba.js";import{N as le,S as ce,M as ie,F as ue}from"./Sidebar.51f1795d.js";import{u as de,P as ge,C as he,a as pe}from"./Catalog.82a9e83d.js";const me={class:"article-header-content"},ve={key:0,class:"article-tags"},fe={class:"article-title"},_e={key:1,class:"article-subtitle"},be={class:"article-icons"},ye={key:0,class:"article-icon"},ke={key:1,class:"article-icon"},Se={key:2,class:"article-icon"},Te={key:1,class:"article-image-credit"},Ce=["href"],Ie={key:1},$e=A({__name:"ArticleHeader",props:{currentTag:{type:String,default:""}},setup(F){const f=D(),a=G(),T=O(),k=U(),$=c=>{var l;return(l=k.value.map[c])==null?void 0:l.path},L=()=>{const c={};return a.value.layout==="Post"&&a.value.useHeaderImage&&a.value.headerImage&&(c.backgroundImage=`url(${W(a.value.headerImage)})`),c},_=f.value.personalInfo;return(c,l)=>{const n=M("RouterLink"),p=M("VIcon");return r(),i("div",{class:N(["article-header",{"use-image":e(a).useHeaderImage}]),style:q(L())},[e(a).useHeaderImage&&e(a).headerMask?(r(),i("div",{key:0,class:"article-header-mask",style:q({background:e(a).headerMask})},null,4)):h("",!0),v("div",me,[e(a).tags?(r(),i("div",ve,[(r(!0),i(j,null,K(e(a).tags,(b,u)=>(r(),I(n,{key:u,class:N(["article-tag",{active:F.currentTag==b}]),to:$(b)},{default:g(()=>[z(m(b),1)]),_:2},1032,["class","to"]))),128))])):h("",!0),v("h1",fe,m(e(a).title),1),e(a).subtitle?(r(),i("p",_e,m(e(a).subtitle),1)):h("",!0),v("div",be,[e(a).author||e(_).name?(r(),i("div",ye,[y(p,{name:"fa-regular-user"}),v("span",null,m(e(a).author||e(_).name),1)])):h("",!0),e(a).date?(r(),i("div",ke,[y(p,{name:"fa-regular-calendar"}),v("span",null,m(e(re)(e(a).date)),1)])):h("",!0),e(T).readingTime?(r(),i("div",Se,[y(p,{name:"ri-timer-line"}),v("span",null,m(e(T).readingTime.minutes)+" min",1)])):h("",!0)])]),e(a).useHeaderImage&&e(a).headerImageCredit?(r(),i("div",Te,[z(m(e(f).headerImageCredit)+" ",1),e(a).headerImageCreditLink?(r(),i("a",{key:0,href:e(a).headerImageCreditLink,target:"_blank",rel:"noopener noreferrer"},m(e(a).headerImageCredit),9,Ce)):(r(),i("span",Ie,m(e(a).headerImageCredit),1))])):h("",!0)],6)}}});var Le=V($e,[["__file","ArticleHeader.vue"]]);const Be={class:"page-content"},He=A({__name:"Common",setup(F){const f=G(),a=D(),T=X(),k=C(()=>f.value.navbar!==!1&&a.value.navbar!==!1),$=C(()=>R.value.path===""),L=Z(),_=C(()=>L.value.length>0&&!$.value),c=E(!1),l=t=>{c.value=typeof t=="boolean"?t:!c.value},n={x:0,y:0},p=t=>{n.x=t.changedTouches[0].clientX,n.y=t.changedTouches[0].clientY},b=t=>{const s=t.changedTouches[0].clientX-n.x,P=t.changedTouches[0].clientY-n.y;Math.abs(s)>Math.abs(P)&&Math.abs(s)>40&&(s>0&&n.x<=80?l(!0):l(!1))},u=E(!1),S=t=>{u.value=typeof t=="boolean"?t:!u.value;const s=document.querySelector("html");u.value?s==null||s.classList.add("fixed"):s==null||s.classList.remove("fixed"),u.value&&setTimeout(function(){document.querySelector(".search-page input").focus()},400)},o=E(!1),B=t=>{o.value=typeof t=="boolean"?t:!o.value},H=C(()=>[{"no-navbar":!k.value,"no-sidebar":!_.value,"sidebar-open":c.value,"catalog-open":o.value,"search-open":u.value},f.value.pageClass]);let w;return Y(()=>{w=T.afterEach(()=>{l(!1),S(!1)})}),J(()=>{w()}),(t,s)=>{const P=M("GungnirSearchPage");return r(),i("div",{class:N(["theme-container",e(H)]),onTouchstart:p,onTouchend:b},[d(t.$slots,"navbar",{},()=>[e(k)?(r(),I(le,{key:0,"is-sidebar":e(_),onToggleSearch:s[0]||(s[0]=x=>S(!0))},{before:g(()=>[d(t.$slots,"navbar-before")]),after:g(()=>[d(t.$slots,"navbar-after")]),_:3},8,["is-sidebar"])):h("",!0)]),v("div",{class:"sidebar-mask",onClick:s[1]||(s[1]=x=>l(!1))}),d(t.$slots,"sidebar",{},()=>[y(ce,{onToggleSearch:s[2]||(s[2]=x=>S(!0))},{top:g(()=>[d(t.$slots,"sidebar-top")]),bottom:g(()=>[d(t.$slots,"sidebar-bottom")]),_:3})]),v("div",Be,[d(t.$slots,"page")]),y(P,{onToggleSearch:s[3]||(s[3]=x=>S(!1))}),y(ie,{onToggleSidebar:l,onToggleCatalog:B}),e(_)?h("",!0):(r(),I(ue,{key:0}))],34)}}});var we=V(He,[["__file","Common.vue"]]);const Pe={class:"post-wrapper"},Fe=A({__name:"Layout",setup(F){const f=pe(),a=f.resolve,T=f.pending,k=de(),$=X(),L=O(),_=C(()=>k.value?[]:L.value.headers),c=o=>o.children.length>0?[o].concat(...o.children.map(c)):o,l=C(()=>[].concat(..._.value.map(c))),n=Q({headerHeight:0,catalogTop:0,activeLink:"",isFixed:!1}),p=40,b=80,u=()=>{const o=document.querySelector(".article-header");n.headerHeight=(o==null?void 0:o.offsetHeight)||0,n.catalogTop=n.headerHeight+p};let S;return Y(()=>{const{y:o}=ee(document),B=()=>{for(let H=l.value.length-1;H>=0;H--){const w=l.value[H].slug,t=document.querySelector(`#${w}`);if((t?t.getBoundingClientRect().top:0)<=100){n.activeLink=w;break}}o.value>n.headerHeight+p-b?(n.isFixed=!0,n.catalogTop=b):(n.isFixed=!1,n.catalogTop=n.headerHeight+p)};ae(o,B),u(),S=$.afterEach(u),window.onresize=()=>{u(),B()}}),te(()=>{S()}),(o,B)=>(r(),I(we,null,{page:g(()=>[y(ne,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:e(a),onBeforeLeave:e(T)},{default:g(()=>[v("div",Pe,[(r(),I(ge,{key:e(R).path},{top:g(()=>[oe(y(Le,null,null,512),[[se,e(R).title]]),d(o.$slots,"page-top",{},void 0,!0)]),"content-top":g(()=>[d(o.$slots,"page-content-top",{},void 0,!0)]),"content-bottom":g(()=>[d(o.$slots,"page-content-bottom",{},void 0,!0)]),bottom:g(()=>[d(o.$slots,"page-bottom",{},void 0,!0)]),_:3})),e(k)?h("",!0):(r(),I(e(he),{key:0,headers:e(l),"active-link":n.activeLink},null,8,["headers","active-link"]))])]),_:3},8,["onBeforeEnter","onBeforeLeave"])]),_:3}))}});var Re=V(Fe,[["__scopeId","data-v-cddf77ae"],["__file","Layout.vue"]]);export{Re as default};
