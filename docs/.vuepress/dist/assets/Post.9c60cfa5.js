import{_ as S,f as F,u as b,l as D,m as h,F as z,v as A,G as N,a4 as R,o as n,g as r,w as v,a as P,b as V,D as W,E as q,h as o,z as k,A as y,H as $,T as G,B as I}from"./app.f9568f53.js";import{A as M,P as O}from"./Pager.a266c583.js";import{C as U}from"./Common.31c93240.js";import{u as Y,P as j,C as J,a as K}from"./Catalog.82a9e83d.js";import"./Sidebar.51f1795d.js";const Q=F({__name:"Post",setup(X){const l=I(),f=b(),C=D(),m=K(),H=m.resolve,L=m.pending,c=Y(),E=h(()=>c.value?l.value.headers:[]),_=t=>t.children.length>0?[t].concat(...t.children.map(_)):t,i=h(()=>[].concat(...E.value.map(_))),e=z({headerHeight:0,screenWidth:0,catalogTop:0,activeLink:"",isFixed:!1}),u=40,x=80,d=()=>{for(let a=i.value.length-1;a>=0;a--){const T=i.value[a].slug,B=document.querySelector(`#${T}`);if((B?B.getBoundingClientRect().top:0)<=100){e.activeLink=T;break}}window.pageYOffset>e.headerHeight+u-x?(e.isFixed=!0,e.catalogTop=x):(e.isFixed=!1,e.catalogTop=e.headerHeight+u)},p=()=>{const t=document.querySelector(".post-header");e.headerHeight=t?t.offsetHeight:0,e.screenWidth=document.body.clientWidth,e.catalogTop=e.headerHeight+u};let w;A(()=>{window.addEventListener("scroll",d),p(),window.onresize=()=>(()=>{p(),d()})(),w=C.afterEach(()=>{p()})}),N(()=>{window.removeEventListener("scroll",d),w()});const{post:s}=R();console.log("val: ",s.value);const g=h(()=>{if(!s.value)return{};const t=s.value.info.next;t&&(t.text=f.value.postNext);const a=s.value.info.prev;return a&&(a.text=f.value.postPrev),{next:t,prev:a}});return(t,a)=>(n(),r(U,null,{page:v(()=>[P(G,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:o(H),onBeforeLeave:o(L)},{default:v(()=>[V("div",{class:y(["post-wrapper",{"show-catalog":o(c)}])},[W(P(M,{class:"post-header"},null,512),[[q,o(l).title]]),(n(),r(j,{key:o(l).path,class:"post-content"},{bottom:v(()=>[o(g).next||o(g).prev?(n(),r(O,{key:0,data:o(g)},null,8,["data"])):k("",!0)]),_:1})),o(c)?(n(),r(o(J),{key:0,headers:o(i),"active-link":e.activeLink,class:y({fixed:e.isFixed}),style:$({top:`${e.catalogTop}px`})},null,8,["headers","active-link","class","style"])):k("",!0)],2)]),_:1},8,["onBeforeEnter","onBeforeLeave"])]),_:1}))}});var ne=S(Q,[["__scopeId","data-v-5fe66077"],["__file","Post.vue"]]);export{ne as default};
