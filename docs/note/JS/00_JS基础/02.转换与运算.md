---
title: 转换与运算符
date: 2020-07-26
lastUpdated: false
---

## 类型转换

### 字符串转换 String

调用 `String(value)` 来将 value 转换为字符串类型

### 数字型转换 Number

1. 在算术函数和表达式中，会自动进行 number 类型转换
   1. e.g. ` "6" / "2"`
   2. 如果该字符串不是一个有效的数字，转换的结果会是 NaN，e.g. ` Number("a")`
2. 使用 Number(value) 显式地将这个 value 转换为 number 类型
3. 转换规则：
   |值| 结果|
   | --- | --- |
   |undefined| NaN|
   |null| 0|
   |true false| 1 and 0|
   |string| 去掉首尾空白字符（空格、换行符 \n、制表符 \t 等）后的纯数字字符串中含有的数字。如果剩余字符串为空，则转换结果为 0。否则，将会从剩余字符串中“读取”数字。当类型转换出现 error 时返回 NaN。|

### 布尔型转换 Boolean

1. 逻辑运算
2. 通过调用 `Boolean(value)` 显式地进行转换
3. 转换规则如下：
   |值| 结果|
   | --- | --- |
   | 0, null, undefined, NaN, ""(空字符串) | false |
   | 其他值(包括非空字符串) | true |
   :::warning 请注意
   包含 `0` 的字符串 `"0"` 是 true
   :::

## 基础运算符&数学运算

### 基础运算符

1. **运算元**：运算符应用的对象
   1. 比如说乘法运算 `5 * 2`，有两个运算元：左运算元 5 和右运算元 2
   2. 有时候人们也称其为“参数”而不是“运算元”
2. **一元运算符**：一个运算符对应的只有一个运算元
   1. 比如说一元负号运算符（unary negation）`-`，它的作用是对数字进行正负转换
3. **二元运算符**：一个运算符拥有两个运算元

如果一个运算符对应的只有一个运算元，那么它是 一元运算符。比如说一元负号运算符（unary negation）-，它的作用是对数字进行正负转换：

### 数学运算

1. 加法 `+`
2. 减法 `-`
3. 乘法 `*`
4. 除法 `/`
5. 取余 `%`
   - `a % b` 的结果是 a 整除 b 的**余数**，e.g. `5%2`的值是 1
6. 求幂 `**`
   - 在数学运算中我们将其表示为 a^b^，e.g. `5**2`的值是 25

### 运算符优先级

如果一个表达式拥有超过一个运算符，执行的顺序则由**优先级**决定。换句话说，所有的运算符中都隐含着优先级顺序。**一元运算符优先级高于二元运算符**

| 优先级 | 名称     | 符号 |
| ------ | -------- | ---- |
| …      | …        | …    |
| 15     | 一元加号 | +    |
| 15     | 一元负号 | -    |
| 14     | 求幂     | \*\* |
| 13     | 乘号     | \*   |
| 13     | 除号     | /    |
| 12     | 加号     | +    |
| 12     | 减号     | -    |
| …      | …        | …    |
| 2      | 赋值符   | =    |
| …      | …        | …    |

### 赋值运算符 =

赋值符号 `=` 也是一个运算符。从优先级表中可以看到它的优先级非常低，只有 2。特性：

1. **赋值 = 返回一个值**
2. **链式赋值**
   - `a = b = c = 2 + 2;`：链式赋值从右到左进行计算。首先，对最右边的表达式 2 + 2 求值，然后将其赋给左边的变量：c、b 和 a。最后，所有的变量共享一个值

#### 3.原地修改

1.  我们经常需要对一个变量做运算，并将新的结果存储在同一个变量中。
    ```js
    let n = 2;
    n = n + 5;
    n = n * 2;
    // 可以使用运算符 += 和 *= 来缩写这种表示。
    let n = 2;
    n += 5; // 现在 n = 7（等同于 n = n + 5）
    n *= 2; // 现在 n = 14（等同于 n = n * 2）
    alert(n); // 14
    ```
2.  所有算术和位运算符都有简短的“**修改并赋值**”运算符：`/=` 和 `-=` 等。这类运算符的优先级与普通赋值运算符的优先级相同，so 它们在大多数其他运算之后执行：
    ```js
    let n = 2;
    n *= 3 + 5;
    alert(n); // 16 （右边部分先被计算，等同于 n *= 8）
    ```

#### 4.自增/自减

1.  自增 ++ 将变量与 1 相加：
    ```js
    let counter = 2;
    counter++; // 和 counter = counter + 1 效果一样，但是更简洁
    alert(counter); // 3
    ```
2.  自减 -- 将变量与 1 相减：
    ```js
    let counter = 2;
    counter--; // 和 counter = counter - 1 效果一样，但是更简洁
    alert(counter); // 1
    ```

:::info 运算符 ++ 和 -- 可以置于变量前，也可以置于变量后。

1. 当运算符置于变量后，被称为“后置形式”：counter++。
2. 当运算符置于变量前，被称为“前置形式”：++counter。

两者都做同一件事：将变量 counter 与 1 相加。
:::

```js
// 前置
let counter = 1;
let a = ++counter; // 对 counter 做自增运算，返回的是新的值 2
alert(a); // 2

// 后置
let counter = 1;
let a = counter++; // 对 counter 做加法，但是返回的是 旧值（做加法之前的值）
alert(a); // 1

// 如果自增/自减的值不会被使用，那么两者形式没有区别：
let counter = 0;
counter++;
++counter;
alert(counter); // 2，以上两行作用相同
```

:::warning 自增/自减和其它运算符的对比：
`++/--`运算符同样可以在表达式内部使用。它们的优先级比绝大部分的算数运算符要高

```js
let counter1 = 1;
alert(2 * ++counter1); // 4

let counter2 = 1;
alert(2 * counter2++); // 2，因为 counter++ 返回的是“旧值”

let a = 1,
  b = 1;
alert(++a); // 2，前置运算符返回最新值
alert(b++); // 1，后置运算符返回旧值
alert(a); // 2，自增一次
alert(b); // 2，自增一次
```

:::

### 位运算符

位运算符把运算元当做 32 位整数，并在它们的二进制表现形式上操作。

位运算符：

1. 按位与 ( `&` )
2. 按位或 ( `|` )
3. 按位异或 ( `^` )
4. 按位非 ( `~` )
5. 左移 ( `<<` )
6. 右移 ( `>>` )
7. 无符号右移 ( `>>>` )

### 逗号运算符

1. 是最少见最不常使用的运算符之一。有时候它会被用来写更简短的代码，因此为了能够理解代码，我们需要了解它
2. 逗号运算符能让我们处理多个表达式，使用 `,` 将它们分开。每个表达式都运行了，但是只有最后一个的结果会被返回。

```js
let a = (1 + 2, 3 + 4);
alert(a); // 7（3 + 4 的结果）
```

:::warning 逗号运算符的优先级非常低
请注意逗号运算符的优先级非常低，比 = 还要低，因此上面你的例子中圆括号非常重要。
如果没有圆括号：`a = 1 + 2, 3 + 4` 会先执行 `+`，将数值相加得到 `a = 3, 7`，然后赋值运算符 `=` 执行 `a = 3`，然后逗号之后的数值 `7` 不会再执行，它被忽略掉了。相当于 `(a = 1 + 2), 3 + 4`
:::
