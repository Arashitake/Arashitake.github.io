import{_ as S,f as F,u as b,l as D,m as h,F as z,v as A,G as N,a4 as R,o as s,g as n,w as g,a as P,b as V,D as W,E as q,h as o,z as k,A as y,H as $,T as G,B as I}from"./app.0d4c2068.js";import{A as M,P as O}from"./Pager.cb8b964b.js";import{C as U}from"./Common.6299f1fc.js";import{u as Y,P as j,C as J,a as K}from"./Catalog.da505495.js";import"./Sidebar.bd4a22c4.js";import"./PageNav.6640c2c1.js";const Q=F({__name:"Post",setup(X){const r=I(),v=b(),C=D(),m=K(),H=m.resolve,L=m.pending,l=Y(),E=h(()=>l.value?r.value.headers:[]),_=t=>t.children.length>0?[t].concat(...t.children.map(_)):t,c=h(()=>[].concat(...E.value.map(_))),e=z({headerHeight:0,screenWidth:0,catalogTop:0,activeLink:"",isFixed:!1}),i=40,x=80,d=()=>{for(let a=c.value.length-1;a>=0;a--){const T=c.value[a].slug,B=document.querySelector(`#${T}`);if((B?B.getBoundingClientRect().top:0)<=100){e.activeLink=T;break}}window.pageYOffset>e.headerHeight+i-x?(e.isFixed=!0,e.catalogTop=x):(e.isFixed=!1,e.catalogTop=e.headerHeight+i)},u=()=>{const t=document.querySelector(".post-header");e.headerHeight=t?t.offsetHeight:0,e.screenWidth=document.body.clientWidth,e.catalogTop=e.headerHeight+i};let w;A(()=>{window.addEventListener("scroll",d),u(),window.onresize=()=>(()=>{u(),d()})(),w=C.afterEach(()=>{u()})}),N(()=>{window.removeEventListener("scroll",d),w()});const{post:p}=R(),f=h(()=>{if(!p.value)return{};const t=p.value.info.next;t&&(t.text=v.value.postNext);const a=p.value.info.prev;return a&&(a.text=v.value.postPrev),{next:t,prev:a}});return(t,a)=>(s(),n(U,null,{page:g(()=>[P(G,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:o(H),onBeforeLeave:o(L)},{default:g(()=>[V("div",{class:y(["post-wrapper",{"show-catalog":o(l)}])},[W(P(M,{class:"post-header"},null,512),[[q,o(r).title]]),(s(),n(j,{key:o(r).path,class:"post-content"},{bottom:g(()=>[o(f).next||o(f).prev?(s(),n(O,{key:0,data:o(f)},null,8,["data"])):k("",!0)]),_:1})),o(l)?(s(),n(o(J),{key:0,headers:o(c),"active-link":e.activeLink,class:y({fixed:e.isFixed}),style:$({top:`${e.catalogTop}px`})},null,8,["headers","active-link","class","style"])):k("",!0)],2)]),_:1},8,["onBeforeEnter","onBeforeLeave"])]),_:1}))}});var re=S(Q,[["__scopeId","data-v-cf40fad6"],["__file","Post.vue"]]);export{re as default};
