import{_ as t,o as s,c as a,b as n,e as p,d as e}from"./app.0d4c2068.js";const o={},c={class:"custom-container info"},l={viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",style:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"}},i=n("path",{d:"M13 1.188C6.477 1.188 1.188 6.477 1.188 13S6.477 24.813 13 24.813 24.813 19.523 24.813 13c0-6.523-5.29-11.812-11.813-11.812Zm2.459 18.307c-.608.24-1.092.422-1.455.548a3.838 3.838 0 0 1-1.262.189c-.736 0-1.309-.18-1.717-.539a1.74 1.74 0 0 1-.611-1.367c0-.215.015-.435.045-.659a8.23 8.23 0 0 1 .147-.759l.761-2.688c.067-.258.125-.503.171-.731.046-.23.068-.441.068-.633 0-.342-.071-.582-.212-.717-.143-.135-.412-.201-.813-.201-.196 0-.398.029-.605.09-.205.063-.383.12-.529.176l.201-.828c.498-.203.975-.377 1.43-.521a4.225 4.225 0 0 1 1.29-.218c.731 0 1.295.178 1.692.53.395.353.594.812.594 1.376 0 .117-.014.323-.041.617a4.129 4.129 0 0 1-.152.811l-.757 2.68a7.582 7.582 0 0 0-.167.736 3.892 3.892 0 0 0-.073.626c0 .356.079.599.239.728.158.129.435.194.827.194.185 0 .392-.033.626-.097.232-.064.4-.121.506-.17l-.203.827Zm-.134-10.878a1.807 1.807 0 0 1-1.275.492c-.496 0-.924-.164-1.28-.492a1.57 1.57 0 0 1-.533-1.193c0-.465.18-.865.533-1.196a1.812 1.812 0 0 1 1.28-.497c.497 0 .923.165 1.275.497.353.331.53.731.53 1.196 0 .467-.177.865-.53 1.193Z",style:{fill:"#157ffb","fill-rule":"nonzero"},transform:"translate(-1.257 -1.257) scale(1.0582)"},null,-1),u=[i],r=n("p",{class:"custom-container-title"},"INFO",-1),k=n("p",null,[p("\u53C2\u8003\u6587\u7AE0: "),n("a",{href:"https://juejin.cn/post/7030759884542967821",target:"_blank",rel:"noopener noreferrer"},"\u4F60\u4E86\u89E3 call\uFF0Capply\uFF0Cbind \u5417\uFF1F\u90A3\u4F60\u53EF\u4EE5\u624B\u5199\u4E00\u4E2A\u5417\uFF1F")],-1),d=e(`<br><ul><li><mark>Q</mark>: call \u548C apply \u7684\u5F02\u540C\u70B9\u3002</li><li><mark>A</mark>: <ol><li><strong>\u540C</strong>\uFF1Acall \u548C apply \u90FD\u662F\u6539\u53D8\u8C03\u7528\u51FD\u6570\u7684 this \u6307\u5411\u540E\u5C31\u7ACB\u5373\u6267\u884C</li><li><strong>\u5F02</strong>\uFF1Acall \u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u8C03\u7528\u51FD\u6570\u7684<u style="color:#ff5f56;">\u4F20\u53C2</u>\uFF0Capply \u7684\u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u4E2A<u style="color:#ff5f56;">\u6570\u7EC4</u>\uFF0C\u4E5F\u662F\u8C03\u7528\u51FD\u6570\u7684\u4F20\u53C2</li></ol></li></ul><br><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>a <span class="token operator">+</span> b <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="call" tabindex="-1"><a class="header-anchor" href="#call" aria-hidden="true">#</a> call</h2><ul><li>Object() \u65B9\u6CD5 <ol><li>\u82E5\u4E3A\u503C\u7C7B\u578B\uFF0C\u5219\u8FD4\u56DE\u7C7B\u578B\u5BF9\u5E94\u7684\u6784\u9020\u51FD\u6570\u521B\u5EFA\u7684\u5B9E\u4F8B</li><li>\u82E5\u4E3A\u5BF9\u8C61\uFF0C\u5219\u8FD4\u56DE\u5BF9\u8C61\u672C\u8EAB</li><li>\u82E5\u4E3A undefined \u6216 null\uFF0C\u5219\u8FD4\u56DE\u7A7A\u5BF9\u8C61</li></ol></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_call</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> o <span class="token operator">=</span> ctx <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> ctx <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> window <span class="token operator">:</span> <span class="token function">Object</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u5C06\u51FD\u6570\u8D4B\u503C\u7ED9\u5BF9\u8C61\u7684\u4E00\u4E2A\u5C5E\u6027\uFF0C\u518D\u7528\u8FD9\u4E2A\u5BF9\u8C61\u53BB\u8C03\u7528\u51FD\u6570\uFF0Cthis\u5C31\u6307\u5411\u8FD9\u4E2A\u5BF9\u8C61\u4E86</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u907F\u514D\u8986\u76D6\u539F\u6709\u5C5E\u6027\uFF0C\u4FDD\u8BC1\u5176\u72EC\u4E00\u65E0\u4E8C</span>
  o<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// \u4FEE\u6539\u6307\u5411</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u7ACB\u5373\u6267\u884C\u4E00\u6B21</span>
  <span class="token keyword">delete</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// \u5220\u9664\u5C5E\u6027</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// \u628A\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u8D4B\u503C\u7ED9 _call \u7684\u8FD4\u56DE\u503C</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="apply" tabindex="-1"><a class="header-anchor" href="#apply" aria-hidden="true">#</a> apply</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_apply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> o <span class="token operator">=</span> ctx <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> ctx <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> window <span class="token operator">:</span> <span class="token function">Object</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  o<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="bind" tabindex="-1"><a class="header-anchor" href="#bind" aria-hidden="true">#</a> bind</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u4E00\u4E9B\u5224\u65AD</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;type error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// \u4F1A\u6307\u5411\u8BE5\u539F\u59CB\u503C\u7684\u5B9E\u4F8B\u5BF9\u8C61</span>
  obj <span class="token operator">=</span> obj <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> obj <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> window <span class="token operator">:</span> <span class="token function">Object</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// \u6B63\u6587</span>
  <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>newArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// \u6784\u9020\u51FD\u6570\u7684\u8BDD this instanceof Fn</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">self</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>newArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>newArgs<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><br><p><mark>\u533A\u522B</mark></p><ol><li>\u4E0D\u7ACB\u5373\u6267\u884C</li></ol><ul><li>call \u548C apply \u662F\u6539\u53D8\u4E86 this \u6307\u5411\u540E\u5C31\u7ACB\u523B\u6267\u884C\u8BE5\u51FD\u6570</li><li>bind \u662F\u6539\u53D8\u4E86 this \u6307\u5411\uFF08\u6539\u53D8\u4E86 this \u4E0A\u4E0B\u6587\uFF09\uFF0C\u5E76\u8FD4\u56DE\u8BE5\u51FD\u6570\uFF0C\u4F46\u662F\u662F\u4E0D\u6267\u884C\u8BE5\u51FD\u6570\u7684</li></ul><ol start="2"><li>\u8FD4\u56DE\u503C</li></ol><ul><li>call \u548C apply \u8FD4\u56DE\u8C03\u7528\u51FD\u6570\u7684\u6267\u884C\u7ED3\u679C</li><li>bind \u8FD4\u56DE\u8C03\u7528\u51FD\u6570\u7684\u62F7\u8D1D\uFF0C\u5E76\u6307\u5B9A\u4E86\u8C03\u7528\u51FD\u6570\u7684 this \u6307\u5411\uFF0C\u4FDD\u5B58\u4E86\u8C03\u7528\u51FD\u6570\u7684\u53C2\u6570</li></ul><h2 id="test-code" tabindex="-1"><a class="header-anchor" href="#test-code" aria-hidden="true">#</a> Test Code</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;\u5F20\u4E09&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// test.call(o);</span>
<span class="token comment">// test._call(o);</span>

<span class="token comment">// let a = test._bind(o);</span>
<span class="token comment">// a();</span>
<span class="token comment">// let b = test.bind(o);</span>
<span class="token comment">// b();</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>test<span class="token punctuation">.</span><span class="token function">_bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19);function v(m,b){return s(),a("div",null,[n("div",c,[(s(),a("svg",l,u)),r,k]),d])}var f=t(o,[["render",v],["__file","01.\u624B\u5199call_apply_bind.html.vue"]]);export{f as default};
