import{_ as M,f as V,u as R,j as z,X as N,r as P,o,c as r,h as e,H as $,z as c,b as u,L as q,M as j,g as C,w as g,e as x,t as n,A as D,a as _,B as A,W as G,l as K,m as E,F as U,v as W,Y as X,K as Y,G as J,n as F,D as O,E as Q,y,T as Z}from"./app.0d4c2068.js";import{f as ee}from"./resolveTime.fab24dba.js";import{C as te}from"./Common.05b0da30.js";import{u as ae,P as oe,C as se,a as re}from"./Catalog.da505495.js";import"./Sidebar.bd4a22c4.js";import"./PageNav.6640c2c1.js";const ne={class:"article-header-content"},le={key:0,class:"article-tags"},ce={class:"article-title"},ie={key:1,class:"article-subtitle"},de={class:"article-icons"},ue={key:0,class:"article-icon"},ge={key:1,class:"article-icon"},me={key:2,class:"article-icon"},he={key:1,class:"article-image-credit"},pe=["href"],_e={key:1},ve=V({__name:"ArticleHeader",props:{currentTag:{type:String,default:""}},setup(B){const h=R(),t=z(),v=A(),f=N(),I=l=>{var i;return(i=f.value.map[l])==null?void 0:i.path},L=()=>{const l={};return t.value.layout==="Post"&&t.value.useHeaderImage&&t.value.headerImage&&(l.backgroundImage=`url(${G(t.value.headerImage)})`),l},k=h.value.personalInfo;return(l,i)=>{const s=P("RouterLink"),d=P("VIcon");return o(),r("div",{class:D(["article-header",{"use-image":e(t).useHeaderImage}]),style:$(L())},[e(t).useHeaderImage&&e(t).headerMask?(o(),r("div",{key:0,class:"article-header-mask",style:$({background:e(t).headerMask})},null,4)):c("",!0),u("div",ne,[e(t).tags?(o(),r("div",le,[(o(!0),r(q,null,j(e(t).tags,(m,p)=>(o(),C(s,{key:p,class:D(["article-tag",{active:B.currentTag==m}]),to:I(m)},{default:g(()=>[x(n(m),1)]),_:2},1032,["class","to"]))),128))])):c("",!0),u("h1",ce,n(e(t).title),1),e(t).subtitle?(o(),r("p",ie,n(e(t).subtitle),1)):c("",!0),u("div",de,[e(t).author||e(k).name?(o(),r("div",ue,[_(d,{name:"fa-regular-user"}),u("span",null,n(e(t).author||e(k).name),1)])):c("",!0),e(t).date?(o(),r("div",ge,[_(d,{name:"fa-regular-calendar"}),u("span",null,n(e(ee)(e(t).date)),1)])):c("",!0),e(v).readingTime?(o(),r("div",me,[_(d,{name:"ri-timer-line"}),u("span",null,n(e(v).readingTime.minutes)+" min",1)])):c("",!0)])]),e(t).useHeaderImage&&e(t).headerImageCredit?(o(),r("div",he,[x(n(e(h).headerImageCredit)+" ",1),e(t).headerImageCreditLink?(o(),r("a",{key:0,href:e(t).headerImageCreditLink,target:"_blank",rel:"noopener noreferrer"},n(e(t).headerImageCredit),9,pe)):(o(),r("span",_e,n(e(t).headerImageCredit),1))])):c("",!0)],6)}}});var fe=M(ve,[["__file","ArticleHeader.vue"]]);const ke={class:"post-wrapper"},ye=V({__name:"Layout",setup(B){const h=re(),t=h.resolve,v=h.pending,f=ae(),I=K(),L=A(),k=E(()=>f.value?[]:L.value.headers),l=a=>a.children.length>0?[a].concat(...a.children.map(l)):a,i=E(()=>[].concat(...k.value.map(l))),s=U({headerHeight:0,catalogTop:0,activeLink:"",isFixed:!1}),d=40,m=80,p=()=>{const a=document.querySelector(".article-header");s.headerHeight=(a==null?void 0:a.offsetHeight)||0,s.catalogTop=s.headerHeight+d};let b;return W(()=>{const{y:a}=X(document),T=()=>{for(let H=i.value.length-1;H>=0;H--){const S=i.value[H].slug,w=document.querySelector(`#${S}`);if((w?w.getBoundingClientRect().top:0)<=100){s.activeLink=S;break}}a.value>s.headerHeight+d-m?(s.isFixed=!0,s.catalogTop=m):(s.isFixed=!1,s.catalogTop=s.headerHeight+d)};Y(a,T),p(),b=I.afterEach(p),window.onresize=()=>{p(),T()}}),J(()=>{b()}),(a,T)=>(o(),C(te,null,{page:g(()=>[_(Z,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:e(t),onBeforeLeave:e(v)},{default:g(()=>[u("div",ke,[(o(),C(oe,{key:e(F).path},{top:g(()=>[O(_(fe,null,null,512),[[Q,e(F).title]]),y(a.$slots,"page-top",{},void 0,!0)]),"content-top":g(()=>[y(a.$slots,"page-content-top",{},void 0,!0)]),"content-bottom":g(()=>[y(a.$slots,"page-content-bottom",{},void 0,!0)]),bottom:g(()=>[y(a.$slots,"page-bottom",{},void 0,!0)]),_:3})),e(f)?c("",!0):(o(),C(e(se),{key:0,headers:e(i),"active-link":s.activeLink},null,8,["headers","active-link"]))])]),_:3},8,["onBeforeEnter","onBeforeLeave"])]),_:3}))}});var Se=M(ye,[["__scopeId","data-v-476d00d5"],["__file","Layout.vue"]]);export{Se as default};
