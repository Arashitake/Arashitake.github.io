import{_ as n,o as s,c as a,d as t}from"./app.0d4c2068.js";const p={},e=t(`<h2 id="readystate-\u72B6\u6001\u548C\u542B\u4E49" tabindex="-1"><a class="header-anchor" href="#readystate-\u72B6\u6001\u548C\u542B\u4E49" aria-hidden="true">#</a> readyState \u72B6\u6001\u548C\u542B\u4E49</h2><ul><li><code>0</code>\uFF1A\u672A\u521D\u59CB\u5316\u72B6\u6001\uFF0C\u521B\u5EFA\u4E86\u4E00\u4E2A XMLHttpRequest \u5BF9\u8C61</li><li><code>1</code>\uFF1A\u51C6\u5907\u53D1\u9001\u72B6\u6001\uFF0C\u5DF2\u7ECF\u4F7F\u7528\u4E86 XMLHttpRequest.open()\u65B9\u6CD5\uFF0C\u5DF2\u7ECF\u51C6\u5907\u597D\u4E00\u4E2A\u8BF7\u6C42\u53D1\u9001\u5230\u670D\u52A1\u5668\u7AEF</li><li><code>2</code>\uFF1A\u5DF2\u7ECF\u53D1\u9001\u72B6\u6001\uFF0C\u5DF2\u7ECF\u901A\u8FC7 send()\u65B9\u6CD5\u53D1\u9001\u8BF7\u6C42\uFF0C\u4F46\u662F\u8FD8\u6CA1\u6709\u5F97\u5230\u54CD\u5E94</li><li><code>3</code>\uFF1A\u6B63\u5728\u63A5\u53D7\u72B6\u6001\uFF0C\u5DF2\u7ECF\u63A5\u53D7\u5230\u670D\u52A1\u5668\u7AEF\u8FD4\u56DE\u7684 http \u54CD\u5E94\uFF0C\u4F46\u8FD8\u6709\u90E8\u5206\u6D88\u606F\u4F53\u6CA1\u6709\u63A5\u6536\u5230</li><li><code>4</code>\uFF1A\u5B8C\u6210\u54CD\u5E94\u72B6\u6001\uFF0C\u5DF2\u7ECF\u5B8C\u6210\u4E86 HTTP \u54CD\u5E94\u7684\u63A5\u6536</li></ul><h2 id="ajax-\u8BF7\u6C42\u8D85\u65F6\u4E0E\u7F51\u7EDC\u5F02\u5E38\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#ajax-\u8BF7\u6C42\u8D85\u65F6\u4E0E\u7F51\u7EDC\u5F02\u5E38\u5904\u7406" aria-hidden="true">#</a> AJAX \u8BF7\u6C42\u8D85\u65F6\u4E0E\u7F51\u7EDC\u5F02\u5E38\u5904\u7406</h2><ol><li>\u8BF7\u6C42\u8D85\u65F6: \u8BBE\u5B9A\u65F6\u95F4, \u8BF7\u6C42\u8D85\u8FC7\u8FD9\u4E2A\u65F6\u95F4\u5C31\u63D0\u9192\u7528\u6237, <code>xhr.ontimeout</code> \u8D85\u65F6\u56DE\u8C03</li><li>\u7F51\u7EDC\u5F02\u5E38: <code>xhr.onerror</code> \u7F51\u7EDC\u5F02\u5E38\u56DE\u8C03</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u8D85\u65F6\u8BBE\u7F6E: 2s</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
<span class="token comment">// \u8D85\u65F6\u56DE\u8C03</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BF7\u6C42\u8D85\u65F6, \u8BF7\u7A0D\u540E\u91CD\u8BD5!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// \u7F51\u7EDC\u5F02\u5E38\u56DE\u8C03</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;\u7F51\u7EDC\u5F02\u5E38, \u8BF7\u7A0D\u540E\u91CD\u8BD5!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:8000/delay&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ajax-\u53D6\u6D88\u8BF7\u6C42" tabindex="-1"><a class="header-anchor" href="#ajax-\u53D6\u6D88\u8BF7\u6C42" aria-hidden="true">#</a> AJAX \u53D6\u6D88\u8BF7\u6C42</h2><p><code>xhr.abort()</code>\u65B9\u6CD5</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// btn0\u548Cbtn1</span>
<span class="token keyword">const</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;botton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:8000/delay&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// abort</span>
btns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ajax-\u8BF7\u6C42\u91CD\u590D\u53D1\u9001" tabindex="-1"><a class="header-anchor" href="#ajax-\u8BF7\u6C42\u91CD\u590D\u53D1\u9001" aria-hidden="true">#</a> AJAX \u8BF7\u6C42\u91CD\u590D\u53D1\u9001</h2><ol><li>\u5982\u679C\u6B63\u5728\u53D1\u9001, \u5219\u53D6\u6D88\u8BE5\u8BF7\u6C42, \u521B\u9020\u4E00\u4E2A\u65B0\u7684\u8BF7\u6C42</li><li>\u8BBE\u7F6E\u4E00\u4E2A\u5E03\u5C14\u53D8\u91CF, \u5728 <code>xhr.readyState === 4</code>\u7684\u65F6\u5019\u66F4\u6539\u72B6\u6001</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;botton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token comment">// \u6807\u8BC6\u53D8\u91CF</span>
<span class="token keyword">let</span> isSending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5224\u65AD\u6807\u8BC6\u53D8\u91CF</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>isSending<span class="token punctuation">)</span> xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u5982\u679C\u6B63\u5728\u53D1\u9001, \u5219\u53D6\u6D88\u8BE5\u8BF7\u6C42, \u521B\u9020\u4E00\u4E2A\u65B0\u7684\u8BF7\u6C42</span>
  xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// \u4FEE\u6539\u6807\u8BC6\u53D8\u91CF\u7684\u503C</span>
  isSending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:8000/delay&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// \u4FEE\u6539\u6807\u8BC6\u53D8\u91CF</span>
      isSending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),o=[e];function c(i,l){return s(),a("div",null,o)}var k=n(p,[["render",c],["__file","2.AJAX\u8BF7\u6C42\u95EE\u9898.html.vue"]]);export{k as default};
